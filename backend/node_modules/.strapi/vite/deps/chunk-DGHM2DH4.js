import {
  pluginId,
  useSettings
} from "./chunk-QZA24MG6.js";
import {
  useMutation,
  useQuery
} from "./chunk-IS3KRXQC.js";
import {
  useFetchClient
} from "./chunk-LZFV5HKC.js";
import {
  useTracking
} from "./chunk-KPMM2GWX.js";
import {
  useNotification
} from "./chunk-LFW7VPPY.js";
import {
  useIntl
} from "./chunk-5E5XY64L.js";

// node_modules/@strapi/upload/dist/admin/hooks/useTracking.mjs
var useTracking2 = () => {
  const { trackUsage: trackStrapiUsage } = useTracking();
  const { data } = useSettings();
  const trackUsage = (event, properties) => {
    return trackStrapiUsage(event, {
      ...properties,
      isAIMediaLibraryConfigured: data == null ? void 0 : data.aiMetadata
    });
  };
  return {
    trackUsage
  };
};

// node_modules/@strapi/upload/dist/admin/hooks/useConfig.mjs
var endpoint = `/${pluginId}/configuration`;
var queryKey = [
  pluginId,
  "configuration"
];
var useConfig = () => {
  const { trackUsage } = useTracking2();
  const { formatMessage } = useIntl();
  const { toggleNotification } = useNotification();
  const { get, put } = useFetchClient();
  const config = useQuery(queryKey, async () => {
    const res = await get(endpoint);
    return res.data.data;
  }, {
    onError() {
      return toggleNotification({
        type: "danger",
        message: formatMessage({
          id: "notification.error"
        })
      });
    },
    /**
    * We're cementing that we always expect an object to be returned.
    */
    select: (data) => data || {}
  });
  const putMutation = useMutation(async (body) => {
    await put(endpoint, body);
  }, {
    onSuccess() {
      trackUsage("didEditMediaLibraryConfig");
      config.refetch();
    },
    onError() {
      return toggleNotification({
        type: "danger",
        message: formatMessage({
          id: "notification.error"
        })
      });
    }
  });
  return {
    config,
    mutateConfig: putMutation
  };
};

export {
  useTracking2 as useTracking,
  useConfig
};
//# sourceMappingURL=chunk-DGHM2DH4.js.map
